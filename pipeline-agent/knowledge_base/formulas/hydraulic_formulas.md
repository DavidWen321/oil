# 管道水力学计算公式

## 1. 雷诺数计算

雷诺数是判断流体流动状态的无量纲数，用于确定流动是层流还是湍流。

### 公式

$$Re = \frac{v \cdot d}{\nu} = \frac{4Q}{\pi d \nu}$$

其中：
- Re: 雷诺数（无量纲）
- v: 流速（m/s）
- d: 管道内径（m）
- ν (nu): 运动粘度（m²/s）
- Q: 流量（m³/s）

### 流态判断

| 雷诺数范围 | 流动状态 |
|-----------|---------|
| Re < 2300 | 层流 |
| 2300 ≤ Re < 4000 | 过渡流 |
| Re ≥ 4000 | 湍流 |

## 2. 摩阻损失计算

### 达西-魏斯巴赫公式

$$h_f = \lambda \cdot \frac{L}{d} \cdot \frac{v^2}{2g}$$

其中：
- hf: 沿程摩阻损失（m）
- λ: 摩阻系数（无量纲）
- L: 管道长度（m）
- d: 管道内径（m）
- v: 流速（m/s）
- g: 重力加速度（9.81 m/s²）

### 摩阻系数计算

#### 层流区（Re < 2300）

$$\lambda = \frac{64}{Re}$$

#### 水力光滑区（2300 ≤ Re < Re₁）

布拉休斯公式：
$$\lambda = \frac{0.3164}{Re^{0.25}}$$

#### 混合摩擦区（Re₁ ≤ Re < Re₂）

柯尔布鲁克公式：
$$\frac{1}{\sqrt{\lambda}} = -2\lg\left(\frac{\varepsilon}{3.7d} + \frac{2.51}{Re\sqrt{\lambda}}\right)$$

#### 粗糙区（Re ≥ Re₂）

尼库拉兹公式：
$$\lambda = \frac{1}{(1.14 - 2\lg(\varepsilon/d))^2}$$

其中：
- ε: 管壁绝对粗糙度（mm），一般取0.2mm
- Re₁ = 59.5/(ε/d)^(8/7)
- Re₂ = 665/(ε/d)

## 3. 水力坡降计算

水力坡降表示单位长度的能量损失：

$$i = \frac{h_f}{L} = \lambda \cdot \frac{v^2}{2gd}$$

或用流量表示：
$$i = \frac{8\lambda Q^2}{\pi^2 g d^5}$$

## 4. 站间压力计算

### 出站压力

$$P_{out} = P_{in} - \rho g h_f$$

### 进站压力

$$P_{in,next} = P_{out} - \rho g \Delta z$$

其中：
- ΔZ: 两站间的高程差（m）
- ρ: 流体密度（kg/m³）

## 5. 泵站扬程计算

### 单泵扬程特性

$$H = H_0 - a \cdot Q^2$$

其中：
- H: 扬程（m）
- H₀: 零流量扬程（m）
- a: 泵特性系数
- Q: 流量（m³/h）

### 并联运行

并联泵组的总流量为各泵流量之和，扬程相等。

### 串联运行

串联泵组的总扬程为各泵扬程之和，流量相等。

## 6. 能耗计算

### 泵功率

$$N = \frac{\rho g Q H}{\eta}$$

其中：
- N: 功率（W）
- η: 泵效率（%）
- H: 扬程（m）
- Q: 流量（m³/s）

### 单位能耗

$$E = \frac{N}{Q} = \frac{\rho g H}{\eta}$$

单位：kWh/m³ 或 kWh/t

## 7. 实际工程中的参数换算与边界条件

在工程实践中，很多数据来自调度系统或历史报表，单位并不统一。为了避免量纲错误，必须先进行标准化：

- 流量从 `m³/h` 转为 `m³/s` 时，使用 `Q_s = Q_h / 3600`
- 管径从 `mm` 转为 `m` 时，使用 `d_m = d_mm / 1000`
- 运动粘度和动力粘度关系：`ν = μ / ρ`

当输入参数来自不同时间断面（例如流量来自小时均值、粘度来自化验单、压力来自分钟级采样）时，应优先统一到同一时间窗。对于稳态水力计算，推荐使用 15 分钟或 1 小时平均值；对于故障诊断，建议保留分钟级数据并叠加移动平均。

此外，边界条件的设置直接影响计算可信度：

1. **入口压头边界**：若首站进站压头缺失，不应直接设为 0，应使用历史工况中位值。  
2. **末站约束边界**：优化问题需设置 `P_end > 0` 或安全下限，避免出现数学可行但工程不可运行的方案。  
3. **粗糙度边界**：新管道与老管道粗糙度差异明显，推荐按投运年限分段估计。

## 8. 泵扬程与站间平衡的工程表达

对于长输油管道，常见的工程表达为：

$$H_{pump,total} + H_{inlet} = H_{friction} + H_{elevation} + H_{outlet}$$

其中：

- `H_pump,total`：所有泵机组提供的总扬程
- `H_inlet`：首站可利用压头
- `H_friction`：沿程摩阻损失
- `H_elevation`：高程差造成的势能项
- `H_outlet`：末站要求保留压头

若该平衡式左侧小于右侧，则说明现有泵组合无法满足工况；若明显大于右侧，则可能存在能耗冗余，应通过减少泵台数或切换低扬程组合来降低电耗。

## 9. 年能耗与年费用的计算链路

在能耗评估中，建议采用“瞬时功率 → 日耗电量 → 年耗电量 → 年费用”的链路：

1. 瞬时功率（kW）：

$$P = \frac{\rho g Q H}{\eta_p \eta_m \times 1000}$$

2. 日耗电量（kWh/d）：

$$E_{day} = P \times 24$$

3. 年耗电量（kWh/a）：

$$E_{year} = E_{day} \times D$$

其中 `D` 为年运行天数（常取 330~350）。

4. 年电费（元/a）：

$$C_{year} = E_{year} \times Price_{elec}$$

当用于方案比选时，应同时输出“基准方案电费”和“优化方案电费”，给出节约率：

$$Saving\ Rate = \frac{C_{base} - C_{opt}}{C_{base}} \times 100\%$$

## 10. 常见误区与校核建议

- **误区1：将外径直接作为内径**。应先扣除双侧壁厚。  
- **误区2：粘度单位混乱**。要确认是 `m²/s` 还是 `cSt`。  
- **误区3：忽略高程差符号**。上坡与下坡对压头方向影响相反。  
- **误区4：效率使用百分数未归一**。例如 80% 必须换算为 0.80。

推荐每次计算后执行三项快速校核：

1. 雷诺数数量级是否与流态一致；
2. 总压头损失是否随流量增大而单调上升；
3. 年电费是否处于历史统计区间。

以上校核可显著降低模型参数错误带来的决策偏差。
