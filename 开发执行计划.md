# 管道能耗分析系统 - 开发执行计划

> [!NOTE]
> 本计划基于《升级方案.md》，专注于代码落地与执行。所有代码将生成在 `java开发` 目录下。

## 阶段一：基础设施搭建 (Infrastructure & Scaffolding)
- [ ] **1.1 初始化 Maven 多模块项目**
    - 创建父工程 `pipeline-energy-cloud`
    - 配置 `pom.xml` (Spring Boot 3.x, Spring Cloud Alibaba 2022.x)
    - 定义模块结构: `common`, `gateway`, `auth`, `system`, `data`, `calculation`
- [ ] **1.2 中间件环境准备**
    - 编写 `docker-compose.yml`
    - 配置 MySQL 8.0, Redis, Nacos, MinIO, Milvus
- [ ] **1.3 基础模块开发 (`common`)**
    - 定义统一响应结果 `Result<T>`
    - 定义全局异常处理 `GlobalExceptionHandler`
    - 定义 Swagger/Knife4j 接口文档配置

## 阶段二：数据库设计与数据服务 (Database & Data Service)
- [ ] **2.1 数据库建模**
    - 编写 MySQL 建表脚本 (`schema.sql`)
    - 涵盖表: `sys_user`, `sys_role`, `t_project`, `t_pipeline`, `t_pump`, `t_oil`
- [ ] **2.2 数据服务开发 (`data-service`)**
    - 集成 MyBatis Plus
    - 生成 Entity, Mapper, Service, Controller 代码
    - 实现基础 CRUD 接口
    - **验证**: 编写 JUnit 单元测试确保数据读写无误

## 阶段三：核心算法迁移 (Calculation Service)
- [ ] **3.1 算法服务框架搭建**
    - 创建 `calculation-service`
    - 定义算法策略接口 `CalculationStrategy`
- [ ] **3.2 水力特性分析算法移植**
    - 移植 `AlgorithmLib` 中的水力分析逻辑
    - 实现 `HydraulicAnalysisStrategy`
- [ ] **3.3 优化算法移植**
    - 移植遗传算法/粒子群算法
    - 实现 `OptimizationStrategy`
- [ ] **3.4 算法验证**
    - 编写对比测试用例 (对比原 C# 程序输出)

## 阶段四：网关与认证 (Gateway & Auth)
- [ ] **4.1 认证服务 (`auth-service`)**
    - 集成 Spring Security + OAuth2 / JWT
- [ ] **4.2 网关服务 (`gateway-service`)**
    - 配置路由转发
    - 配置鉴权过滤器

## 阶段五：AI 智能体开发 (Python Agent)
- [ ] **5.1 Python 项目初始化**
    - 创建 `agent-service` (FastAPI)
    - 配置 Poetry/Pipenv 依赖
- [ ] **5.2 RAG 知识库实现**
    - 编写文档加载与向量化脚本
    - 实现检索接口
- [ ] **5.3 LangGraph 智能体编排**
    - 实现 `Orchestrator`, `Analyst`, `Expert` Agent
    - 对接 Java 微服务接口

## 阶段六：前端开发 (Web UI)
- [ ] **6.1 Vue3 项目初始化**
- [ ] **6.2 核心页面开发**
    - 项目管理页
    - 聊天对话页 (Chat UI)

---
**执行原则**:
1. 每完成一个小节 (如 1.1)，进行代码审查和编译测试。
2. 严格遵守阿里巴巴 Java 开发手册规范。
3. Python 代码遵守 PEP8 规范。
